<!DOCTYPE html>
<!-- saved from url=(0049)http://fiddle.jshell.net/flockonus/seB73/30/show/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>Flockonus Portfolio 2.0 - jsFiddle demo by flockonus</title>
  
  <script type="text/javascript" src="javascripts/jquery-1.7.1.js"></script>
  
  
  <link rel="stylesheet" type="text/css" href="./Flockonus Portfolio 2.0 - jsFiddle demo by flockonus_files/result-light.css">
  
  <style type="text/css">
    *{margin: 0; padding: 0; font-size: 110%;font-family: "Helvetica", "Lucida Sans", "Lucida Sans Unicode"}

html, body{
    /* FONTS? Karla 
     * 
     * background: #BDB;*/
    height: 100%;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    /* DEPLOY */
    overflow: hidden;
}
/*body > header{ heigth: 15% }*/
#panel{
    height: 10%;
}
#panel *{ position: absolute; background: #FAA; text-align: center;  }
#panel h1{
    width: 50%;
    left: 25%;
    z-index: 500;
}
#panel .back,#panel .next{
    width: 5%;
    cursor: pointer;
    z-index: 500;
}
#panel .back{ left: 18% }
#panel .next{ left: 77% }

.screen-glass{
    z-index: 50;
    background: rgba(180,180,235,0.5);
    position: absolute;
    top: 25%;
    left: 20%;
    right: 20%;
    bottom: 10%;
    font-size: 90%;
    opacity: 1;
    -webkit-transition: all 0.5s ease-in-out;
    -webkit-transition: all 0.5s ease-in-out;
    -webkit-transform: perspective(0) rotateY(0deg) translateZ(0px);
    -webkit-backface-visibility: visible;
    -webkit-transform-origin-x: 50%;
    -webkit-transform-origin-y: 50%;
}

/* looking good! */
.screen-glass.right{
    -webkit-transform: perspective(1500px) rotateY(-82deg) translate3d(61px,0px,-630px);
    z-index: 10;
    /*left: 81% !important;
    right: 0% !important;*/
}

.screen-glass.left/* looks bad! */{
    -webkit-transform: perspective(1500px) rotateY(82deg) translate3d(-61px,0em,-630px);
    z-index: 10;
/*    width: 50%;*/
    /*left:  20% !important;
    right: 20% !important;*/
}

.hidden{
    /*display: none;*/
   opacity: 0;
   z-index: 2 !important;
}

.spot{
    position: absolute;
    width: 100%;
    height: 100%;
    z-index:1;
    -webkit-transition: 1.5s linear;/*ease; */
    -moz-transition:    1.5s linear;
background: -webkit-radial-gradient(center, ellipse cover, rgba(255, 255, 255, 0.3) 1%,rgba(255, 255, 255, 0) 70%,rgba(255, 255, 255, 0) 100%); /* Chrome10+,Safari5.1+ */
background: -moz-radial-gradient(center, ellipse cover,  rgba(255,255,255,1) 0%, rgba(255,255,255,0) 40%, rgba(255,255,255,0) 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(255,255,255,1)), color-stop(40%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
background: -o-radial-gradient(center, ellipse cover,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 40%,rgba(255,255,255,0) 100%); /* Opera 12+ */
background: -ms-radial-gradient(center, ellipse cover,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 40%,rgba(255,255,255,0) 100%); /* IE10+ */
background: radial-gradient(center, ellipse cover,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 40%,rgba(255,255,255,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

body{
background: rgb(13,112,2); /* Old browsers */
background: -moz-linear-gradient(-45deg, rgba(13,112,2,1) 0%, rgba(0,214,0,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(13,112,2,1)), color-stop(100%,rgba(0,214,0,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(-45deg, rgba(13,112,2,1) 0%,rgba(0,214,0,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(-45deg, rgba(13,112,2,1) 0%,rgba(0,214,0,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(-45deg, rgba(13,112,2,1) 0%,rgba(0,214,0,1) 100%); /* IE10+ */
background: linear-gradient(-45deg, rgba(13,112,2,1) 0%,rgba(0,214,0,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0d7002', endColorstr='#00d600',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

@-webkit-keyframe sintH1 {
    from {
        -webkit-transform: skew(0deg,0deg);
        -moz-transform: skew(0deg,0deg);
    }
    50%{
        -webkit-transform: skew(90deg,0deg);
        -moz-transform: skew(90deg,0deg);
    }
    100%{
        -webkit-transform: skew(180deg,0deg);
        -moz-transform: skew(180deg,0deg);
    }
}

.h1distort{
    -webkit-animation-name: sintH1;
    -webkit-animation-duration: 0.5s;
    -webkit-animation-iteration-count: 2;
}

  </style>
  


<script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
var j = jQuery;

function getDimension() {
    var jdoc = j(document)
        //w = jdoc.width(),
        //h = jdoc.height();
    //console.log('dimension', w, h);
    return {
        w: jdoc.width(),
        h: jdoc.height(),
    }
}

// dont use for panel anymore!


function positionElements(dim) {
    //var jdoc = j(document),
    //    w = jdoc.width(),
    //    h = jdoc.height(),
    var padding1 = 5,
        arrowBtW = 20;
    // ensure header size!
    j('body > header').css('height', dim.h * 0.18);
    //j('.screen-glass:last').hide()
}

// all percentages, so never goes wrong
var spotPos = [[-28, -25], [0, -35], [28, -25], [35, 5], [28, 30], [0, 45], [-28, 30], [-35, 5]];
function rotateSpots(step, duration) {
    var pos = spotPos[ step % spotPos.length ];
    //console.log('spot..', pos, step, duration);
    j('.spot:first')
        .css('left', pos[0]+'%')
        .css('top', pos[1]+'%');
    pos = spotPos[ (step+4) % spotPos.length ];
    j('.spot:last')
        .css('left', pos[0]+'%')
        .css('top', pos[1]+'%');
    setTimeout(rotateSpots, duration, step + 1, duration);
}

function correctCSS (dim) {
    //var css = document.styleSheets[1]//$('style')[0].sheet.rules;
      //, perspective = Math.floor(90/0.060)+'px'
    var glasses = {
          base_val: [0.8581235697940504, 0.03489702517162471, 0.36041189931350115],//[0.8581235697940504, 0.03489702517162471, 0.36041189931350115],
          right: {
              template: "perspective(?px) rotateY(-82deg) translate3d(?px,0px,-?px) !important;",
          },
          left: {
              template: "perspective(?px) rotateY(82deg) translate3d(-?px,0em,-?px) !important;",
          }
      }
    //if( dim.w < 1300 ) glasses.base_val[0] = glasses.base_val[0]*( 0.8 )
    var diffW = dim.w - 1750
    glasses.base_val[0] = glasses.base_val[0]*( 1+(diffW*0.0006) )
    //console.log( diffW, 1+(diffW*0.0005), glasses.base_val )
    
    for (var i=0; i < glasses.base_val.length; i++) {
      glasses.right.template = glasses.right.template.replace( /\?/, glasses.base_val[i]*dim.w )
      glasses.left.template = glasses.left.template.replace( /\?/, glasses.base_val[i]*dim.w )
    };
    
    // TODO set font-size!
    
    // TODO, marcar esse elemento, e nao ficar adicionando sheet toda hora!
    var style = document.createElement('style');
    style.innerHTML = ".screen-glass.right { -webkit-transform: "+glasses.right.template+" } "+".screen-glass.left  { -webkit-transform: "+glasses.left.template+" }";
    j('head').append( style );
    
    
    
    // nao ta escrevendo no Chrome! pq?
    //css.insertRule( ".screen-glass.right { -webkit-transform: "+glasses.right.template+" }", 0 )
    //css.insertRule( ".screen-glass.left  { -webkit-transform: "+glasses.left.template+" }", 1 )
    
    console.log('dim', dim.w, dim.h);
}

function orderGlasses () {
  var glasses = j('.screen-glass');
  glasses.filter(':eq(0)').addClass('middle')
  glasses.filter(':eq(1)').addClass('right')
  glasses.filter(':gt(1)').addClass('hidden')
}

function init() {
    //setTimeout( function(){j("#welcome").fadeOut();}, 1000);
    var dim = getDimension();
    positionElements(dim);
    correctCSS(dim);
    j('#panel .next').click(function() {
        var glass = j('.screen-glass.middle')
        if( glass.next().size() ){
            glass.removeClass('middle').addClass('left')
            glass.prev().addClass('hidden')//.removeClass('left')
            glass.next().addClass('middle').removeClass('right')
            glass.next().next().addClass('right').removeClass('hidden')
        }
    });
    j('#panel .back').click(function() {
        var glass = j('.screen-glass.middle')
        if( glass.prev().size() ){
            glass.removeClass('middle').addClass('right')
            glass.prev().addClass('middle').removeClass('left')
            glass.prev().prev().addClass('left').removeClass('hidden')
            glass.next().addClass('hidden')//.removeClass('right')
        }
    });
    rotateSpots(0, 1500);
    //KEYFRAMES, sera que vai funcionar?
    // fallback eh usar um jquery e outro com  setTimeout, contanto com a anicao basica
    // especificacao (bom!) http://www.w3.org/TR/css3-animations/#keyframes-
    // pratica neve (webkit) natbat.net/code/clientside/css/snowflakes/
    // sprites (util!) http://hacks.mozilla.org/2011/09/taking-steps-with-css-animations/
    // 
    
    orderGlasses();
    setTimeout( function(){
        j('h1:first').addClass('h1distort');
    }, 1000);
}
init();


});//]]>  

</script>


</head>
<body>
  <header style="height: 156.06px; "> 
    <nav id="panel">
        <div class="back"> &lt; </div>
        <h1 class="h1distort"> Page Title </h1>
        <div class="next"> &gt; </div>
    </nav>
</header>
<section>
    <article id="page1" class="screen-glass">
        <header>
            <h1>Fabiano PS Portfolio</h1>
        </header>
        <p>
            Hi.<br /><br />
            Ima webdev --dahora
            - "da hora a vida"
        </p>
    </article>
    <article id="page2" class="screen-glass">
        <header>
            <h1>GameWiser</h1>
            <div>JavaScript, Node.js, jQuery, MongoDB</div>
        </header>
        <p>
            Independent peer based game review website. We proposed as focus to create a better system to search and review games from several platforms.
        </p>
    </article>
    <article id="page3" class="screen-glass">
        <header>
            <h1>Flockin Games</h1>
            <div>Node.js, ActionScript3, MySQL</div>
        </header>
        <p>
            An extensive project, involving crafting a in-site game tracking 
        </p>
    </article>
    <article id="page4" class="screen-glass">
        <header>
            <h1>This to be page 2!</h1>
        </header>
        <p>
            The pear is cool
        </p>
    </article>
    <article id="page5" class="screen-glass">
        <header>
            <h1>This to be page 2!</h1>
        </header>
        <p>
            The pear is cool
        </p>
    </article>
</section>

<div class="spot" style="left: 28%; top: -25%; ">&nbsp;</div>
<div class="spot" style="left: -28%; top: 30%; ">&nbsp;</div>

  





</body></html>